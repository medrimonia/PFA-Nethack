diff -Nur nethack-3.4.3.b/src/allmain.c nethack-3.4.3/src/allmain.c
--- nethack-3.4.3.b/src/allmain.c	2003-12-08 00:39:13.000000000 +0100
+++ nethack-3.4.3/src/allmain.c	2013-01-30 19:27:58.770904676 +0100
@@ -6,6 +6,8 @@
 
 #include "hack.h"
 
+#include "pfamain.h"
+
 #ifndef NO_SIGNAL
 #include <signal.h>
 #endif
@@ -59,7 +61,15 @@
     u.uz0.dlevel = u.uz.dlevel;
     youmonst.movement = NORMAL_SPEED;	/* give the hero some movement points */
 
+	/* PFA addition
+	 * Nethack should have finished initializing at this point. Let us
+	 * initialize the pfa's components now */
+	 pfa_init();
+
     for(;;) {
+	/* PFA addition */
+	pfa_newloop();
+
 	get_nh_event();
 #ifdef POSITIONBAR
 	do_positionbar();
diff -Nur nethack-3.4.3.b/src/end.c nethack-3.4.3/src/end.c
--- nethack-3.4.3.b/src/end.c	2003-12-08 00:39:13.000000000 +0100
+++ nethack-3.4.3/src/end.c	2013-01-30 19:38:50.344041468 +0100
@@ -11,6 +11,8 @@
 #endif
 #include "dlb.h"
 
+#include "pfamain.h"
+
 	/* these probably ought to be generated by makedefs, like LAST_GEM */
 #define FIRST_GEM    DILITHIUM_CRYSTAL
 #define FIRST_AMULET AMULET_OF_ESP
@@ -960,6 +962,9 @@
 terminate(status)
 int status;
 {
+	/* PFA addition */
+	pfa_end();
+
 #ifdef MAC
 	getreturn("to exit");
 #endif

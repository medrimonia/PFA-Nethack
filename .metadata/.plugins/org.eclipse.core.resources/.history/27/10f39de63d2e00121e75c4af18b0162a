package bot;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;

class Parser{
	
	private BufferedReader input;
	private int mapHeight = -1;
	private int mapWidth = -1;
	
	public Parser(){
		input = new BufferedReader(new InputStreamReader(System.in));
	}
	
	public void parseNextTurn(Bot b) throws IOException{
		// Verify start of message
		if (!input.readLine().equals(Protocole.START_TOKEN))
			throw new RuntimeException("Invalid start");
		String line;
		while ((line = input.readLine()).equals(Protocole.END_TOKEN)){
			// Multi-line message
			if (line.startsWith(Protocole.START_TOKEN))
				b.treatInformation(parseMultiLineVar(line));
			// Mono-line message
			else
				b.treatInformation(parseMonoLineVar(line));
		}
	}
	
	private Information parseMultiLineVar(String line) {
		Variable v = Variable.tokenToVariables(line.split(" ")[1]);
		switch (v){
		case MAP :
				return parseMap();
		default :
				return null;//TODO should throw Exception
		}
	}

	private static Information parseMonoLineVar(String line){
		//TODO
		return null;
	}
}